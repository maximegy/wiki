<!-- TITLE: Difference entre Kubernetes et Swarm -->
<!-- SUBTITLE: Page d'accueil pour les articles en français -->

# Différences Globales

| Kubernetes                                                                                                                            | Swarm                                                                                                                                                                                                                   |
| ------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Créé par Google, maintenu par CNCF<br />Grande communauté réactive qui continue de grandir<br />Adapté aux infrastructures complexes  | Créé et maintenu par Docker Inc<br />Communauté plus petite<br />Adapté aux infrastructures simples<br />Docker maintien son control et les fonctionnalités "entreprises" sont seulement mises à disposition par Docker |
| Compliqué à Installer                                                                                                                 | Installé en 2 commandes car natif au docker engine                                                                                                                                                                      |
| Fonctionne avec n'importe quel moteur de conteneur                                                                                    | Supporte seulement docker                                                                                                                                                                                               |
| Hautement configurable et modifiable                                                                                                  | Configurations limitées                                                                                                                                                                                                 |
| Dispose d'un GUI via le Dashboard Kubernetes                                                                                          | Ne dispose pas de GUI                                                                                                                                                                                                   |
| Le Scaling UP est simple                                                                                                              | Le scaling up est 5x plus rapide que k8s                                                                                                                                                                                |
| L'auto-scalling est automatique et basé par le trafic des serveurs, les containers vont être automatiquement mis à l'échelle (+ ou -) | Pas d'auto scaling                                                                                                                                                                                                      |
| Les mises à jour des services se fait progressivement en préservant la HA, le Rollback est automatique en cas d'échec                 | Les mises à jours des services est progressive en préservant la HA, le Rollback n'est pas automatique en cas d'échec                                                                                                    |
| Le Load Balancing est à configurer manuellement                                                                                       | Le Load Balancing est automatique                                                                                                                                                                                       |
| Plusieurs options pour les plugins de réseau (flannel, canal, calico, etc)                                                            | Seulement le réseau overlay                                                                                                                                                                                             |
| La découverte et le routage vers les services est simple, même à grande échelle                                                       | La découverte et le routage vers les services devient très coimpliqué à gérer à grande échelle                                                                                                                          |
| Les volumes sont partagés seulement entre les conteneurs du même pod                                                                  | Les volumes peuvent être partagés avec n'importe quel conteneur                                                                                                                                                         |
| Les outils de logging et de Monitoring sont déjà intégrés                                                                             | Il est nécessaire d'utiliser un ou plusieurs outils tiers                                                                                                                                                               |

# Concepts Clé

|          Kubernetes          |                                                                                                                                                                 |            Swarm            |                                                                                                   |
| :--------------------------: | :-------------------------------------------------------------------------------------------------------------------------------------------------------------- | :-------------------------: | :------------------------------------------------------------------------------------------------ |
|            `Pod`             | Plus petit objet déployable, exécute un process, un ou plusieurs conteneurs partageant du stockage et une IP                                                    |           `Task`            | Unité de planification atomique, un conteneur avec une commande exécutée à l'intérieur            |
|         `Deployment`         | Déclare l'état désiré des pods ainsi que leur nombre de réplicas                                                                                                |          `Service`          | Définition de tasks, première interface de Swarm                                                  |
|        `Replica Set`         | Défini le nombre de réplique d'un pod à exécuter à un moment donné                                                                                              |          `Replica`          | Défini le nombre de tasks pour un service                                                         |
|          `Service`           | Défini un groupement logique d epods et leur politique d'accès, Répartie les requêtes entre les pods                                                            |      `Ingress Network`      | Route / répartie les requêtes pour les services vers les nodes exécutant les tasks                |
|            `Node`            | Master : exécute les composants du master (interfacre de contrôle)<br />Workers : exécute les pods, gérés par les master                                        |           `Node`            | Managers : dispache les tasks, orchestren gère les états<br />Workers : exécute les tasks         |
|     `Labels & Selectors`     | Organise les ressources, permet aux replica sets et services de connaitre quels sont les pods à gérer                                                           |          `Labels`           | Utilisé seulement comme métadonnées                                                               |
| `Resource requests & limits` | Peut-être spécifié pour un pod, alloue du cpu, de la mémoire, du stockage et des ressources custom                                                              |      `Resource limits`      | Configuré avec les paramètres de configuration de la commande docker run. Gère CPU, MEM, block IO |
|            `RBAC`            | Permet de définir granulairement des rôles et les attribuer au niveau du cluster ou du namespace                                                                |           `RBAC`            | Seulement dans Docker EE Std & Advanced                                                           |
| `Multi-tenancy & isolation`  | beaucoup d'options et contrôles avec notamment l'isolation réseau, l'isolation de noeud, les contôles d'accès basés sur des rôles, les quotas de ressources etc | `Multi-tenancy & isolation` | eulement dans Docker EE Std & Advanced                                                            |

# Haute Disponibilité

|                              | Kubernetes                                                                                                                                                                                                                                                                                | Swarm                                                                                                                                   |
| ---------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------- |
| Level management             | Un niveau de 3 à 5 nodes "**master**" qui répond aux appels API et Web, puis délègue aux N Noeuds "**workers**".<br />Les services peuvent directement exploiter des équilibreurs de charge externes individuels ou définir des ports "NodePorts" qui sont routés via le niveau "master". | Un niveau de 3 à 5 noeuds "**manager**" répond aux demandes sur un seul équilibreur de charge externe, délégué à N noeuds "**workers**" |
| Défaillance level management | Les noeuds master doivent maintenir un quorum et un noeud maître défaillant entraînera l'échec de la plupart des services                                                                                                                                                                 | les noeuds manager doivent maintenir un quorum et un échelon manager défaillant continuera l'exécution des services                     |
| Perte d'un worker            | Les noeuds "workers" perdus sont automatiquement remplacés                                                                                                                                                                                                                                | Les noeuds "workers" perdus sont automatiquement remplacés                                                                              |
| Mises à jour                 | les mises à niveau de cluster en place arrivant à échéance, les distributions de tiers peuvent différer                                                                                                                                                                                   | le cluster peut être upgradé sur place                                                                                                  |


# Capacités du cluster

|                 | Kubernetes                                                                                          | Swarm                                                                                                 |
| --------------- | --------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------- |
| Optimisé pour   | Un seul grand cluster                                                                               | Plusieurs petits cluster par cycle de vie de développement                                            |
| Load Balancing  | Les espaces de noms aident à organiser les SDLC ou à déléguer l'accès à des ensembles de conteneurs | Des limitations de l'équilibreur de charge peuvent survenir avec des exigences SSL ou DNS spécifiques |
| Node support    | Supporte jusquèà 5 000 Nodes                                                                        | Supporte plus de 2 000 Nodes                                                                          |
| Container Limit | Limité à 300 000 conteneurs                                                                         | Limité à 95 000 conteneurs                                                                            |

# Fonctionnement du déploiement
|                                              | Kubernetes                                                                                                                                                                                                                                                      | Swarm                                                                                                                                                                                                  |
| -------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| Détails                                      | Grand nombre d'options de déploiement<br />Le CLI kubectl peut être lancé n'importe où avec un accès à l'API du master<br /> Le type de déploiement natif fournit une interface robuste pour les mises à jour, les secrets et le management de l'infrastructure | Simple commande lancée sur le noeud de management en CLI<br />Utilise Docker-Compose pour les configurations, Support limité pour les secrets<br />Support de mise à jour progressive (rolling update) |
| Les ressources AWS doivent être pré-créées ? | Non, Kubernetes gère et crée les ressources AWS nécessaires                                                                                                                                                                                                     | Oui                                                                                                                                                                                                    |

# En résumé

|                                    Kubernetes                                     |                        Swarm                         |
| :-------------------------------------------------------------------------------: | :--------------------------------------------------: |
|                      **<span style="color:green">+</span>**                       |        **<span style="color:green">+</span>**        |
|                         Profite de l'expérience de Google                         |                    Natif à Docker                    |
|              Courche d'orchestration la plus riche en fonctionnalité              | Configuration simple, utilisable avec Docker-Compose |
| Nombreuses options de déploiement, découverte de conteneurs intégrée et puissante |         **<span style="color:red">-</span>**         |
|                       **<span style="color:red">-</span>**                        |              Intégration cloud limitée               |
|           Processus d'installation et de configuration le plus complexe           |       Découverte de service uniquement par DNS       |
|                            Difficile de rester à jour                             |         Un load balancer externe par cluster         |
